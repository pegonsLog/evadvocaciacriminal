<div class="clients-list-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-8">
          <h1 class="page-title">
            <i class="bi bi-list-ul me-3"></i>
            Lista de Clientes
          </h1>
          <p class="page-subtitle">Gerencie todos os clientes cadastrados no sistema</p>
        </div>
        <!-- <div class="col-lg-4 text-lg-end">
          <div class="header-stats">
            <div class="stat-item">
              <span class="stat-value">{{ clientes.length }}</span>
              <span class="stat-label">Total de Clientes</span>
            </div>
          </div>
        </div> -->
      </div>
    </div>
  </div>

  <div class="container mt-4">
    <!-- Action Bar -->
    <div class="action-bar mb-4" *ngIf="clientes.length > 0">
      <div class="search-section">
        <div class="search-wrapper">
          <div class="search-input-group">
            <i class="bi bi-search search-icon"></i>
            <input type="text" class="search-input" placeholder="Buscar cliente por nome, CPF ou telefone..."
              [(ngModel)]="searchTerm" (ngModelChange)="filterClients()">
            <button class="search-clear" type="button" *ngIf="searchTerm" (click)="clearSearch()">
              <i class="bi bi-x-lg"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="action-buttons">
        <button class="btn btn-primary btn-lg" (click)="novoCliente()">
          <i class="bi bi-plus-circle me-2"></i>
          Novo Cliente
        </button>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="clientes.length === 0" class="empty-state">
      <div class="empty-state-content">
        <div class="empty-state-icon">
          <i class="bi bi-people"></i>
        </div>
        <h3>Nenhum cliente cadastrado</h3>
        <p>Comece adicionando seu primeiro cliente para gerenciar contratos e pagamentos</p>
        <button class="btn btn-primary btn-lg" (click)="novoCliente()">
          <i class="bi bi-plus-circle me-2"></i>
          Cadastrar Primeiro Cliente
        </button>
      </div>
    </div>

    <!-- No Results State -->
    <div *ngIf="clientes.length > 0 && filteredClients.length === 0" class="empty-state">
      <div class="empty-state-content">
        <div class="empty-state-icon">
          <i class="bi bi-search"></i>
        </div>
        <h3>Nenhum cliente encontrado</h3>
        <p>Tente buscar por outro termo ou limpe o filtro</p>
        <button class="btn btn-outline-primary" (click)="clearSearch()">
          <i class="bi bi-arrow-clockwise me-2"></i>
          Limpar Filtro
        </button>
      </div>
    </div>

    <!-- Clients List -->
    <div class="clients-list" *ngIf="filteredClients.length > 0">
      <div class="list-header">
        <h4>
          <i class="bi bi-list-ul me-2"></i>
          Clientes Cadastrados
        </h4>
        <div class="results-info" *ngIf="searchTerm">
          Mostrando {{ filteredClients.length }} de {{ clientes.length }} cliente(s)
        </div>
      </div>

      <div class="list-container">
        <div class="client-list-item" *ngFor="let cliente of filteredClients; trackBy: trackByClienteId">
          <div class="client-main-info">
            <div class="client-avatar">
              {{ cliente.nome.charAt(0).toUpperCase() }}
            </div>
            <div class="client-details">
              <div class="client-name-section">
                <h5 class="client-name">{{ cliente.nome }}</h5>
                <div class="client-status-badge active">
                  <i class="bi bi-check-circle"></i>
                  Ativo
                </div>
              </div>
              <div class="client-contact">
                <span class="contact-item">
                  <i class="bi bi-card-text"></i>
                  {{ cliente.cpf }}
                </span>
                <span class="contact-item">
                  <i class="bi bi-telephone"></i>
                  {{ cliente.telefone }}
                </span>
                <span class="contact-item">
                  <i class="bi bi-envelope"></i>
                  {{ cliente.email }}
                </span>
              </div>
            </div>
          </div>

          <div class="client-contract-info">
            <div class="contract-summary">
              <div class="contract-item">
                <span class="contract-label">Contrato</span>
                <span class="contract-value">{{ cliente.contrato.numeroContrato }}</span>
              </div>
              <div class="contract-item">
                <span class="contract-label">Valor Total</span>
                <span class="contract-value total">{{ cliente.contrato.valorTotal |
                  currency:'BRL':'symbol':'1.0-0':'pt-BR' }}</span>
              </div>
              <div class="contract-item">
                <span class="contract-label">Entrada</span>
                <span class="contract-value entrada">{{ cliente.contrato.valorEntrada |
                  currency:'BRL':'symbol':'1.0-0':'pt-BR' }}</span>
              </div>
              <div class="contract-item">
                <span class="contract-label">Parcelas</span>
                <span class="contract-value">{{ cliente.contrato.numeroParcelas }}x de {{ cliente.contrato.valorParcela
                  |
                  currency:'BRL':'symbol':'1.0-0':'pt-BR' }}</span>
              </div>
              <div class="contract-item">
                <span class="contract-label">Vencimento</span>
                <span class="contract-value">Dia {{ getDiaVencimento(cliente) }}</span>
              </div>
            </div>
          </div>

          <div class="client-actions">
            <div class="action-buttons">
              <button class="action-btn details" (click)="verDetalhes(cliente.id)" title="Ver Detalhes">
                <i class="bi bi-eye"></i>
              </button>
              <button class="action-btn payments" (click)="verParcelas(cliente.id)" title="Ver Parcelas">
                <i class="bi bi-cash-stack"></i>
              </button>
              <button class="action-btn edit" (click)="editarCliente(cliente.id)" title="Editar">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="action-btn duplicate" (click)="duplicarCliente(cliente.id)" title="Duplicar Cliente">
                <i class="bi bi-copy"></i>
              </button>
              <button class="action-btn delete" (click)="excluirCliente(cliente.id)" title="Excluir" *ngIf="isAdmin()">
                <i class="bi bi-trash"></i>
              </button>
            </div>
            <div class="client-date">
              <i class="bi bi-calendar3"></i>
              {{ cliente.dataCadastro | date:'dd/MM/yyyy' }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container mt-4">
  <h2 class="mb-4">Controle de Pagamentos</h2>

  <div *ngIf="resumos.length === 0" class="alert alert-info">
    Nenhum cliente cadastrado ainda.
  </div>

  <div *ngIf="resumos.length > 0">
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead class="table-dark">
          <tr>
            <th>Cliente</th>
            <th>Valor da Compra</th>
            <th>Nº Parcelas</th>
            <th>Valor da Parcela</th>
            <th>Total Pago</th>
            <th>Saldo Devedor</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let resumo of resumos">
            <td>{{ resumo.clienteNome }}</td>
            <td>{{ resumo.valorCompra | currency:'BRL' }}</td>
            <td>{{ resumo.numeroParcelas }}x</td>
            <td>{{ resumo.valorParcela | currency:'BRL' }}</td>
            <td class="text-success fw-bold">{{ resumo.totalPago | currency:'BRL' }}</td>
            <td class="text-danger fw-bold">{{ resumo.saldoDevedor | currency:'BRL' }}</td>
            <td>
              <div class="btn-group" role="group">
                <button 
                  class="btn btn-sm btn-info btn-action" 
                  (click)="verDetalhes(resumo.clienteId)"
                  title="Ver Detalhes">
                  <i class="bi bi-eye"></i>
                </button>
                <button 
                  class="btn btn-sm btn-primary btn-action" 
                  (click)="verPagamentos(resumo.clienteId)"
                  title="Pagamentos">
                  <i class="bi bi-cash-stack"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
        <tfoot class="table-secondary">
          <tr class="fw-bold">
            <td>TOTAIS</td>
            <td>{{ totalGeralCompras | currency:'BRL' }}</td>
            <td colspan="2"></td>
            <td class="text-success">{{ totalGeralPago | currency:'BRL' }}</td>
            <td class="text-danger">{{ totalGeralDevedor | currency:'BRL' }}</td>
            <td></td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
</div>
